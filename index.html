<!DOCTYPE html>
<html>
  <head>
    <title>Weatherstation Demo</title>
    <script type="text/javascript" src="static/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="static/socket.io.js"></script>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="static/excanvas.js"></script><![endif]-->
    <script>
$(function() {
  WEB_SOCKET_SWF_LOCATION = "/static/WebSocketMain.swf";
  WEB_SOCKET_DEBUG = true;
  console.log("Connecting to websocket");
  // Socket.io specific code
  var socket = io.connect('10.0.1.6:8080/Get', {
    'reconnect': true,
    'reconnection delay': 500,
  }); 
  $("#status").html("Connecting");
  socket.on('disconnect', function() {
    var msg = "Disconnected";
    $("#status").html(msg);
  });
    socket.on('error', function() {
    var msg = "Connection failed";
    $("#status").html(msg);
  });
  socket.on('connect', function() {
    var msg = "Connected";
    $("#status").html(msg);
  });
  socket.on('msg2', function(data) {
    var parsedData = JSON.parse(data);
    var display = "Humidity: " + parsedData[0] + "<br>Temperature: " + parsedData[1] + "<br>Pressure: " + parsedData[2] +
	"<br>Date Time = " + parsedData[3];
    $("#msg2").html(display);
    console.log(data);
  });
});
  </script>
  </head>
<body>
  <h2>Server Status</h2>
  	<div id="status"></div>
  <h2>Weather Data</h2>
  	<div id="msg2"></div>
</body>
</html>
